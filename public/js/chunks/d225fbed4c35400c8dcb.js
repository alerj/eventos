(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"8lMk":function(e,t,a){"use strict";a.r(t);var r=a("jx1L"),i=a("L2JU");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n={methods:o({},Object(i.mapActions)("categorizables",["clearForm"])),computed:o({},Object(i.mapState)({people:function(e){return e.people},categorizables:function(e){return e.categorizables}}))},l=a("CtO9"),g={name:"categorizables",uri:"people/{people.selected.id}/categories/categorizables"},d={props:["mode"],mixins:[r.a,n,l.a],data:function(){return{service:g,categorizablesChecked:{},checkedCategory:{}}},computed:{categorizablesFilterText:{get:function(){return this.$store.state.categorizables.data.filter.text},set:function(e){return this.$store.dispatch(this.service.name+"/mutateSetQueryFilterText",e)}},categorizablesPerPage:{get:function(){return this.$store.state.categorizables.data.links.pagination.per_page},set:function(e){return this.$store.dispatch("categorizables/setPerPage",e)}}},methods:{categorizablesGotoPage:function(e){this.gotoPage(e,"categorizables",this.categorizables.data.links.pagination)},isChecked:function(e){return!!this.checkedCategory.hasOwnProperty(e.id)&&this.checkedCategory[e.id].checked},toggleCheck:function(e){this.checkedCategory.hasOwnProperty(e.id)||(this.checkedCategory[e.id]={id:e.id,checked:!1}),this.checkedCategory[e.id].checked=!this.checkedCategory[e.id].checked,this.categorizablesChecked=this.getCategorizablesChecked()},categorize:function(){var e={personId:this.people.selected.id,categories:this.categorizablesChecked};this.$store.dispatch("categorizables/categorize",e),this.$router.go(-1)},getCategorizablesChecked:function(){return _.filter(this.checkedCategory,(function(e){return e.checked}))}}},u=a("KHd+"),p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"py-2 text-center"},[a("h1",[e._v(e._s(e.people.selected.name))]),e._v(" "),a("h2",[e._v("Associar Categorias a Pessoas")])]),e._v(" "),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-6"},[e.categorizables.data.links?a("app-table-panel",{attrs:{title:"Categorias","per-page":e.categorizablesPerPage,"filter-text":e.categorizablesFilterText},on:{"set-per-page":function(t){e.categorizablesPerPage=t},"input-filter-text":function(t){e.categorizablesFilterText=t.target.value}}},[a("template",{slot:"buttons"},[e.categorizablesChecked.length>0?a("button",{staticClass:"btn btn-primary btn-sm pull-right",attrs:{dusk:"associate-category",disabled:e.cannot("people:modify")},on:{click:function(t){return e.categorize()}}},[e._v("\n                        associar categorias\n                    ")]):e._e()]),e._v(" "),a("app-table",{attrs:{pagination:e.categorizables.data.links.pagination,columns:["#","","Nome"]},on:{"goto-page":function(t){return e.categorizablesGotoPage(t)}}},e._l(e.categorizables.data.rows,(function(t){return a("tr",{class:{"cursor-pointer":!0,"bg-primary-lighter text-white":e.isCurrent(t,e.categorizables.selected)}},[a("td",{staticClass:"align-middle"},[e._v(e._s(t.id))]),e._v(" "),a("td",{staticClass:"align-middle"},[a("input",{attrs:{type:"checkbox",dusk:"select-category"},domProps:{checked:e.isChecked(t)},on:{input:function(a){return e.toggleCheck(t)}}})]),e._v(" "),a("td",{staticClass:"align-middle"},[e._v("\n                            "+e._s(t.name)+"\n                        ")])])})),0)],2):e._e()],1)])])}),[],!1,null,null,null);t.default=p.exports}}]);